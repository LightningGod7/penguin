plugins:
  uprobes_test: {}
  verifier:
    conditions: {}

static_files:
  /tests/uprobes_test.sh:
    type: inline_file
    contents: |
      #!/igloo/utils/micropython

      import ffilib

      # libc = ffilib.libc()
      libc = ffilib.open("/igloo/dylibs/libc.so")

      # printf8i = libc.func("i", "printf", "piiiiiiii")
      # printf8i("%d %d %d %d %d %d %d %d\n", 1, 2, 3, 4, 5, 6, 7, 8)
      printf_basic = libc.func("i", "printf", "p")
      printf_basic("Hello from uprobe_test\n")

      print("tests pass")

    mode: 73